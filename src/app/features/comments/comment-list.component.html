<div style="display:grid;grid-template-columns:1fr 320px;gap:1.5rem;">
  <!-- Comments List -->
  <div>
    <div class="form-group" style="margin-bottom:1rem;">
      <label>SÃ©lectionner une tÃ¢che</label>
      <select class="input" [(ngModel)]="selectedTaskId">
        <option [ngValue]="null">-- Choisir une tÃ¢che --</option>
        <option *ngFor="let t of taskOptions()" [value]="t.id">{{ t.title }}</option>
      </select>
    </div>

    <div *ngIf="!selectedTaskId" style="text-align:center;padding:2rem;color:#9ca3af;">
      <div style="font-size:2rem;margin-bottom:.5rem;">ğŸ’¬</div>
      <p>SÃ©lectionnez une tÃ¢che pour voir les commentaires</p>
    </div>

    <div *ngIf="selectedTaskId">
      <div class="small" style="margin-bottom:.75rem;">{{ list().length }} commentaire(s)</div>

      <div *ngIf="list().length === 0" style="text-align:center;padding:2rem;background:#f8f9fa;border-radius:10px;color:#9ca3af;">
        <p>Aucun commentaire pour cette tÃ¢che</p>
      </div>

      <div *ngFor="let c of list()" style="padding:1rem;background:#f8f9fa;border-radius:10px;margin-bottom:.75rem;">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;">
          <span class="badge" [class.etat-validee]="c.type === 'urgent'" [class.etat-en_cours]="c.type === 'quotidien'">
            {{ c.type === 'urgent' ? 'ğŸ”´ Urgent' : c.type === 'quotidien' ? 'ğŸ“… Quotidien' : 'â„¹ï¸ Informatif' }}
          </span>
          <span class="small">{{ c.createdAt | date:'dd MMM yyyy, HH:mm' }}</span>
        </div>
        <p style="margin:0;white-space:pre-wrap;">{{ c.content }}</p>
      </div>
    </div>
  </div>

  <!-- Add Comment Form -->
  <form (ngSubmit)="add()" style="padding:1.25rem;background:#f8f9fa;border-radius:10px;height:fit-content;">
    <h4 style="margin:0 0 1rem 0;">â• Nouveau commentaire</h4>

    <div class="form-group">
      <label>Type</label>
      <select class="input" [(ngModel)]="type" name="type">
        <option value="informatif">â„¹ï¸ Informatif</option>
        <option value="quotidien">ğŸ“… Quotidien</option>
        <option value="urgent">ğŸ”´ Urgent</option>
      </select>
    </div>

    <div class="form-group">
      <label>Contenu</label>
      <textarea class="input" [(ngModel)]="content" name="content" rows="4" placeholder="Ã‰crivez votre commentaire..."></textarea>
    </div>

    <button type="submit" class="btn primary" style="width:100%;" [disabled]="!selectedTaskId || !content.trim()">
      ğŸ’¬ Ajouter le commentaire
    </button>
  </form>
</div>

